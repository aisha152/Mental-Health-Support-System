<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Brighter Days</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', sans-serif; }
        body { background: #64f4c9; min-height: 100vh; display: flex; justify-content: center; align-items: center; position: relative; }
        .back-btn { position: absolute; top: 40px; left: 40px; width: 60px; height: 60px; background: white; border-radius: 50%; display: flex; align-items: center; justify-content: center; box-shadow: 0 4px 15px rgba(0,0,0,0.2); cursor: pointer; font-size: 28px; transition: 0.3s; }
        .back-btn:hover { transform: translateX(-5px); }
        .signin-box { background: white; padding: 50px 40px; border-radius: 30px; width: 90%; max-width: 420px; text-align: center; box-shadow: 0 15px 35px rgba(0,0,0,0.1); }
        .signin-box h2 { font-size: 38px; margin-bottom: 12px; }
        .input-field { width: 100%; padding: 18px 20px; margin: 14px 0; border: none; border-radius: 15px; background: #fdf2f8; font-size: 17px; }
        .signin-btn-main { background: #64f4c9; color: #000; font-weight: bold; padding: 18px; border: none; border-radius: 50px; font-size: 20px; cursor: pointer; width: 100%; margin: 15px 0; }
        .signin-btn-main:hover { background: #50e3b8; }
        .login-link a { color: #008cba; font-weight: bold; text-decoration: none; }
        .forgot-pass { margin-top: 10px; font-size: 14px; cursor: pointer; color: #008cba; text-decoration: underline; }
        .msg { margin-top: 10px; font-weight: bold; }
    </style>
</head>
<body>

    <div class="back-btn" onclick="window.history.back()">‚Üê</div>

    <div class="signin-box">
        <h2>Login</h2>
        <p>Welcome back!</p>

        <input type="email" id="email" class="input-field" placeholder="Your email">
        <input type="password" id="password" class="input-field" placeholder="Your password">

        <button class="signin-btn-main" onclick="doLogin()">Login</button>
        <p class="forgot-pass" onclick="forgotPassword()">Forgot Password?</p>
        <p class="msg" id="msg"></p>

        <p class="login-link">New here? <a href="signin.html">Create Account</a></p>
    </div>

    <script>
        function doLogin() {
            const email = document.getElementById("email").value.trim();
            const password = document.getElementById("password").value.trim();
            const msg = document.getElementById("msg");

            if (!email || !password) {
                msg.style.color = "red";
                msg.innerText = "Please fill in all fields.";
                return;
            }

            const users = JSON.parse(localStorage.getItem("users")) || [];
            const user = users.find(u => u.email === email && u.password === password);

            if (user) {
                localStorage.setItem("currentUser", user.name);
                msg.style.color = "green";
                msg.innerText = "Login successful! Redirecting...";
                setTimeout(() => {
                    window.location.href = "dashboard.html";
                }, 1000);
            } else {
                msg.style.color = "red";
                msg.innerText = "Invalid email or password.";
            }
        }


        function forgotPassword() {
            const email = prompt("Enter your registered email:");
            const msg = document.getElementById("msg");

            if (!email) return;

            const users = JSON.parse(localStorage.getItem("users")) || [];
            const user = users.find(u => u.email === email.trim());

            if (user) {
                alert(`Your password is: ${user.password}`);
            } else {
                alert("No account found with this email!");
            }
        }
        // SIGNUP function
async function signupUser(userData) {
  try {
    const response = await fetch('http://localhost:5000/api/auth/signup', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(userData)
    });
    
    const data = await response.json();
    
    if (response.ok) {
      localStorage.setItem('token', data.token);
      // Redirect to dashboard
      window.location.href = '/dashboard.html';
    } else {
      alert(data.message);
    }
  } catch (error) {
    console.error('Signup error:', error);
  }
}

// LOGIN function  
async function loginUser(credentials) {
  try {
    const response = await fetch('http://localhost:5000/api/auth/login', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify(credentials)
    });
    
    const data = await response.json();
    
    if (response.ok) {
      localStorage.setItem('token', data.token);
      // Redirect to dashboard
      window.location.href = '/dashboard.html';
    } else {
      alert(data.message);
    }
  } catch (error) {
    console.error('Login error:', error);
  }
}
    </script>

</body>
</html>
